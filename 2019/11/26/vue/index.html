<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Vue实战经验汇总 | 趁年轻</title><meta name="description" content="Vue实战经验汇总"><meta name="keywords" content="es6,JavaScript,webpack,Vuejs,element,vue-cli,vuex,vue-router"><meta name="author" content="Lhl"><meta name="copyright" content="Lhl"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="http://ta.qq.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vue实战经验汇总"><meta name="twitter:description" content="Vue实战经验汇总"><meta name="twitter:image" content="http://qiniu.loveyu.wang/vue.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Vue实战经验汇总"><meta property="og:url" content="https://lhl-cpu.github.io/2019/11/26/vue/"><meta property="og:site_name" content="趁年轻"><meta property="og:description" content="Vue实战经验汇总"><meta property="og:image" content="http://qiniu.loveyu.wang/vue.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://lhl-cpu.github.io/2019/11/26/vue/"><link rel="prev" title="ES6" href="https://lhl-cpu.github.io/2019/11/26/es6/"><link rel="next" title="Ajax" href="https://lhl-cpu.github.io/2019/10/26/ajax/"><script src="https://tajs.qq.com/stats?sId=66549184" charset="UTF-8"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">15</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">28</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">5</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue框架使用注意事项和最佳经验"><span class="toc-number">2.</span> <span class="toc-text">vue框架使用注意事项和最佳经验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue生命周期以及不同生命周期下的应用"><span class="toc-number">2.1.</span> <span class="toc-text">vue生命周期以及不同生命周期下的应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue常用的指令以及动态指令的使用"><span class="toc-number">2.2.</span> <span class="toc-text">vue常用的指令以及动态指令的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue常用修饰符及作用"><span class="toc-number">2.3.</span> <span class="toc-text">vue常用修饰符及作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#组件之间，父子组件之间的通信方案"><span class="toc-number">2.4.</span> <span class="toc-text">组件之间，父子组件之间的通信方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue实现按需加载组件"><span class="toc-number">2.5.</span> <span class="toc-text">vue实现按需加载组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vuex的几种属性和作用，以及使用vuex的基本模式"><span class="toc-number">2.6.</span> <span class="toc-text">vuex的几种属性和作用，以及使用vuex的基本模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue-router基本使用模式和导航钩子的用法及作用"><span class="toc-number">2.7.</span> <span class="toc-text">vue-router基本使用模式和导航钩子的用法及作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue中检测变化的注意事项"><span class="toc-number">2.8.</span> <span class="toc-text">vue中检测变化的注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对指定页面使用keep-alive路由缓存"><span class="toc-number">2.9.</span> <span class="toc-text">对指定页面使用keep-alive路由缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue常用工具函数总结"><span class="toc-number">2.10.</span> <span class="toc-text">vue常用工具函数总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如何基于axios二次封装一个具有请求-响应拦截的http请求"><span class="toc-number">2.11.</span> <span class="toc-text">如何基于axios二次封装一个具有请求&#x2F;响应拦截的http请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue常用社区组件，插件"><span class="toc-number">2.12.</span> <span class="toc-text">vue常用社区组件，插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue项目配置经验总结"><span class="toc-number">3.</span> <span class="toc-text">vue项目配置经验总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue组件设计经验总结"><span class="toc-number">4.</span> <span class="toc-text">vue组件设计经验总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue项目架构与服务化探索"><span class="toc-number">5.</span> <span class="toc-text">vue项目架构与服务化探索</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(http://qiniu.loveyu.wang/vue.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">趁年轻</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Vue实战经验汇总</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2019-11-26 15:45:03"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-11-26</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-02 12:47:21"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-02</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">5.8k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 23 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2019/11/26/vue/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2019/11/26/vue/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在开始文章之前，对javascript, css, html基础有一定的了解，因为会用框架不一定能很好的实现业务需求和功能，要想实现不同场景下不同复杂度的需求，一定要对web基础有充足的了解，所以希望大家熟悉如下基础知识，如果不太熟悉可以花时间研究了解一下。</p>
<p>javascript： 数组常用方法的使用，比如遍历有forEach，map，filter，every， some，reduce，操作方法有splice，slice， join，push，shift， pop，sort等 基本数据结构，引用类型（对象，数组） 基本逻辑运算if else， switch，三目运算：？，for/while循环等 字符串常见api（如replace，slice， substr，indexOf） 基本正则使用 变量作用域，作用域链，变量提升，函数声明提升 * 对象基本用法，面向对象编程</p>
<p>css： 基本盒模型（border/content/padding等） 4种常用定位（static/absolute/relative/fixed） 常用布局方式（浮动布局/弹性布局flex/自适应布局/网格布局grid） css3基本样式与动画（transition，animation）</p>
<p>html： 新标签基本用法和使用 head标签作用与用法（主要是meta属性的用法）</p>
<p>所以希望大家掌握好以上基础知识，也是前端开发的基础，接下来我们直接进入正文。</p>
<h3 id="vue框架使用注意事项和最佳经验"><a href="#vue框架使用注意事项和最佳经验" class="headerlink" title="vue框架使用注意事项和最佳经验"></a>vue框架使用注意事项和最佳经验</h3><h4 id="vue生命周期以及不同生命周期下的应用"><a href="#vue生命周期以及不同生命周期下的应用" class="headerlink" title="vue生命周期以及不同生命周期下的应用"></a>vue生命周期以及不同生命周期下的应用</h4><p><img src="/" class="lazyload" data-src="http://qiniu.loveyu.wang/lifecycle.png"  alt="lifecycle"></p>
<p>以上是vue官网上的生命周期的方法，大致划分一下分为创建前/后，挂载前/后，更新前/后，销毁前/后这四个阶段。各个阶段的状态总结如下：</p>
<p><strong>beforeCreate</strong>：在beforeCreate生命周期执行时，data和methods中的数据还未初始化，所以此时不能使用data中的数据和methods中的方法</p>
<p><strong>create</strong>：data 和 methods初始化完毕，此时可以使用methods 中的方法和data 中的数据 </p>
<p><strong>beforeMount</strong>：template模版已经编译好，但还未挂载到页面，此时页面还是上一个状态 <strong>mounted</strong>：此时Vue实例初始化完成了，DOM挂载完毕，可以直接操作dom或者使用第三发dom库</p>
<p><strong>beforeUpdate</strong>： 此时data已更新，但还未同步页面</p>
<p><strong>updated</strong>：data和页面都已经更新完成</p>
<p><strong>beforeDestory</strong>：Vue实例进入销毁阶段，但所有的 data 和 methods ，指令， 过滤器等都处于可用状态</p>
<p><strong>destroyed</strong>： 此时组件已经被销毁，data，methods等都不可用</p>
<p>根据以上介绍，页面第一次加载时会执行 beforeCreate， created， beforeMount， mounted这四个生命周期，所以我们一般在created阶段处理http请求获取数据或者对data做一定的处理， 我们会在mounted阶段操作dom，比如使用jquery，或这其他第三方dom库。其次，根据以上不同周期下数据和页面状态的不同，我们还可以做其他更多操作，所以说每个生命周期的发展状态非常重要，一定要理解，这样才能对vue有更多的控制权。</p>
<h4 id="vue常用的指令以及动态指令的使用"><a href="#vue常用的指令以及动态指令的使用" class="headerlink" title="vue常用的指令以及动态指令的使用"></a>vue常用的指令以及动态指令的使用</h4><p>指令 (Directives) 是带有 v- 前缀的特殊属性，vue常用的指令有：</p>
<p>v-bind 用于响应式地更新 HTML属性</p>
<p>v-if 根据表达式的值的真假来决定是否插入/移除元素</p>
<p>v-on 用于监听 DOM 事件</p>
<p>v-show 用于决定是否展示该元素，底层通过display：none实现</p>
<p>v-html 在dom内插入html内容</p>
<p>v-for 循环</p>
<p>v-text 渲染指定dom的内容文本</p>
<p>v-cloak 和CSS规则如 [v-cloak] { display: none } 一起用，可以隐藏未编译的 Mustache 标签直到实例准备完毕</p>
<p>以上是比较常用的指令，具体用法就不一一举例了，其中v-cloak主要是用来避免页面加载时出现闪烁的问题，可以结合css的[v-cloak] { display: none }方式解决这一问题。关于指令的动态参数，使用也很简单，虽然是2.6.0 新增的，但是方法很灵活，具体使用如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;a v-on:[eventName]&#x3D;&quot;doSomething&quot;&gt; ... &lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

<p>我们可以根据具体情况动态切换事件名，从而绑定统一个函数。</p>
<h4 id="vue常用修饰符及作用"><a href="#vue常用修饰符及作用" class="headerlink" title="vue常用修饰符及作用"></a>vue常用修饰符及作用</h4><ol>
<li>事件修饰符</li>
<li>.stop 阻止事件冒泡</li>
<li>.prevent 阻止事件默认行为</li>
<li>.self 事件绑定的元素本身触发时才触发回调</li>
<li>.once 事件只能触发一次，第二次就不会触发了</li>
<li>.native 将一个vue组件变成一个普通的html，使其可以监听click等原生事件 具体使用如下：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Tag</span> @<span class="attr">click.native</span>=<span class="string">"handleClick"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">Tag</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>表单修饰符</li>
<li>.lazy 在输入框输入完内容，光标离开时才更新视图</li>
<li>.trim 过滤首尾空格</li>
<li>.number 如果先输入数字，那它就会限制你输入的只能是数字;如果先输入字符串，那就相当于没有加.number</li>
</ol>
<p>用法如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model.trim</span>=<span class="string">"value"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>还有很多修饰符比如键盘，鼠标等修饰符，感兴趣的大家可以自行学习研究。</p>
<h4 id="组件之间，父子组件之间的通信方案"><a href="#组件之间，父子组件之间的通信方案" class="headerlink" title="组件之间，父子组件之间的通信方案"></a>组件之间，父子组件之间的通信方案</h4><p>组件之间的通信方案： <em>通过事件总线（bus），即通过发布订阅的方式</em> vuex</p>
<p>父子组件： <em>父组件通过prop向自组件传递数据</em> 子组件绑定自定义事件，通过this.$emit(event,params) 来调用自定义事件 * 使用vue提供的 $parent / $children &amp; $refs方法来通信</p>
<h4 id="vue实现按需加载组件"><a href="#vue实现按需加载组件" class="headerlink" title="vue实现按需加载组件"></a>vue实现按需加载组件</h4><p>组件的按需加载是项目性能优化的一个环节，也可以降低首屏渲染时间，笔者在项目中用到的组件按需加载的方式如下：</p>
<ol>
<li>使用() =&gt; import()， 具体代码如下：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ComponentA</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ComponentB</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> ComponentA = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./ComponentA'</span>)</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> ComponentB = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./ComponentB'</span>)</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line">    components: &#123;</span><br><span class="line">    ComponentA, </span><br><span class="line">    ComponentB </span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>使用resolve =&gt; require([‘./ComponentA’], resolve)，使用方法如下：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ComponentA</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> ComponentA = <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'./ComponentA'</span>], resolve)</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line">    components: &#123;</span><br><span class="line">    ComponentA</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// ...</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="vuex的几种属性和作用，以及使用vuex的基本模式"><a href="#vuex的几种属性和作用，以及使用vuex的基本模式" class="headerlink" title="vuex的几种属性和作用，以及使用vuex的基本模式"></a>vuex的几种属性和作用，以及使用vuex的基本模式</h4><blockquote>
<p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p>
</blockquote>
<p>vuex的基本工作模式如下图所示：</p>
<p><img src="/" class="lazyload" data-src="http://qiniu.loveyu.wang/image-20200602104707186.png"  alt="image-20200602104707186"></p>
<p>state的改变完全由mutations控制， 我们也没必要任何项目都使用vuex，对于中大型复杂项目而言，需要共享的状态很多时，使用vuex才是最佳的选择。接下来我将详细介绍各api的概念和作用。 <em>state 单一状态树，用一个对象就包含了全部的应用层级状态，并且作为一个唯一数据源而存在</em> getters 就像计算属性一样，getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算 比如如下案例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    todos: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    doneTodos: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.done)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 访问getters里的属性</span></span><br><span class="line"><span class="keyword">this</span>.$store.getters.doneTodos</span><br></pre></td></tr></table></figure>

<ul>
<li>Mutation 更改 Vuex 的 store 中的状态的唯一方法，使用案例如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    num: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    add (state) &#123;</span><br><span class="line">      <span class="comment">// 变更状态</span></span><br><span class="line">      state.num++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在项目中使用mutation</span></span><br><span class="line">store.commit(<span class="string">'add'</span>)</span><br><span class="line"><span class="comment">// 添加额外参数</span></span><br><span class="line">store.commit(<span class="string">'add'</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>Action Action提交的是mutation，而不是直接变更状态，可以包含任意异步操作，具体用法如下：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    num: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    add (state) &#123;</span><br><span class="line">      state.num++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    add (context) &#123;</span><br><span class="line">      context.commit(<span class="string">'add'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    asyncAdd (&#123; commit &#125;) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">'add'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 分发action</span></span><br><span class="line">store.dispatch(<span class="string">'add'</span>)</span><br><span class="line"><span class="comment">// 异步action</span></span><br><span class="line">store.dispatch(<span class="string">'asyncAdd'</span>)</span><br><span class="line"><span class="comment">// 异步传参</span></span><br><span class="line">store.dispatch(<span class="string">'asyncAdd'</span>, &#123; <span class="attr">num</span>: <span class="number">10</span> &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>Module 将store分割成模块（module）。每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块</li>
</ul>
<p>实际经验总结了一套标准使用模式,如下：</p>
<p><img src="/" class="lazyload" data-src="http://qiniu.loveyu.wang/image-20200602104858006.png"  alt="image-20200602104858006"></p>
<p>store目录是用来组织vuex代码用的，我将action，mutation，state分文件管理，这样项目大了之后也很容易管理和查询。接下来看看此文件是如何组织的：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type.ts </span></span><br><span class="line"><span class="comment">// 用来定义state等的类型文件</span></span><br><span class="line"><span class="keyword">export</span> interface State &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    isLogin: boolean;</span><br><span class="line">    config: Config;</span><br><span class="line">    [propName: string]: any;  <span class="comment">// 用来定义可选的额外属性</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface Config &#123;</span><br><span class="line">    header: HeaderType,</span><br><span class="line">    banner: Banner,</span><br><span class="line">    bannerSider: BannerSider,</span><br><span class="line">    supportPay: SupportPay</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface Response &#123;</span><br><span class="line">    [propName: string]: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// state.ts</span></span><br><span class="line"><span class="comment">// 定义全局状态</span></span><br><span class="line"><span class="keyword">import</span> &#123; State &#125; <span class="keyword">from</span> <span class="string">'./type'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> state: State = &#123;</span><br><span class="line">    name: <span class="string">''</span>,</span><br><span class="line">    isLogin: <span class="literal">false</span>,</span><br><span class="line">    curScreen: <span class="string">'0'</span>, <span class="comment">// 0为pc， 1为移动</span></span><br><span class="line">    config: &#123;</span><br><span class="line">        header: &#123;</span><br><span class="line">            columns: [<span class="string">'首页'</span>, <span class="string">'产品'</span>, <span class="string">'技术'</span>, <span class="string">'运营'</span>, <span class="string">'商业'</span>],</span><br><span class="line">            height: <span class="string">'50'</span>,</span><br><span class="line">            backgroundColor: <span class="string">'#000000'</span>,</span><br><span class="line">            logo: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    articleDetail: <span class="literal">null</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mutation.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; </span><br><span class="line">    State,</span><br><span class="line">    Config, </span><br><span class="line">    HeaderType, </span><br><span class="line">    Banner,</span><br><span class="line">    BannerSider,</span><br><span class="line">    SupportPay</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'./type'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 预览模式</span></span><br><span class="line">    setScreen(state: State, <span class="attr">payload</span>: string) &#123;</span><br><span class="line">        state.curScreen = payload;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除banner图</span></span><br><span class="line">    delBanner(state: State, <span class="attr">payload</span>: number) &#123;</span><br><span class="line">        state.config.banner.bannerList.splice(payload, <span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加banner图</span></span><br><span class="line">    addBanner(state: State, <span class="attr">payload</span>: object) &#123;</span><br><span class="line">        state.config.banner.bannerList.push(payload);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// action.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; </span><br><span class="line">    HeaderType,</span><br><span class="line">    Response</span><br><span class="line"> &#125; <span class="keyword">from</span> <span class="string">'./type'</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">'../utils/http'</span></span><br><span class="line"><span class="keyword">import</span> &#123; uuid, formatTime &#125; <span class="keyword">from</span> <span class="string">'../utils/common'</span></span><br><span class="line"><span class="keyword">import</span> &#123; message &#125; <span class="keyword">from</span> <span class="string">'ant-design-vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">/**配置 */</span></span><br><span class="line">    setConfig(context: any, <span class="attr">paylod</span>: HeaderType) &#123;</span><br><span class="line">        http.get(<span class="string">'/config/all'</span>).then(<span class="function">(<span class="params">res:Response</span>) =&gt;</span> &#123;</span><br><span class="line">            context.commit(<span class="string">'setConfig'</span>, res.data)</span><br><span class="line">        &#125;).catch(<span class="function">(<span class="params">err:any</span>) =&gt;</span> &#123;</span><br><span class="line">            message.error(err.data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**header */</span></span><br><span class="line">    saveHeader(context: any, <span class="attr">paylod</span>: HeaderType) &#123;</span><br><span class="line">        http.post(<span class="string">'/config/setHeader'</span>, paylod).then(<span class="function">(<span class="params">res:Response</span>) =&gt;</span> &#123;</span><br><span class="line">            message.success(res.data)</span><br><span class="line">            context.commit(<span class="string">'saveHeader'</span>, paylod)</span><br><span class="line">        &#125;).catch(<span class="function">(<span class="params">err:any</span>) =&gt;</span> &#123;</span><br><span class="line">            message.error(err.data)</span><br><span class="line">        &#125;)  </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.ts</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; state &#125; <span class="keyword">from</span> <span class="string">'./state'</span>;</span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">'./mutation'</span>;</span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">'./action'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="comment">// 最后挂载到入口文件的vue实例上</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store/'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./component-class-hooks'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./registerServiceWorker'</span>;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure>

<p>我们在实际项目中都可以使用这种方式组织管理vuex相关的代码。</p>
<h4 id="vue-router基本使用模式和导航钩子的用法及作用"><a href="#vue-router基本使用模式和导航钩子的用法及作用" class="headerlink" title="vue-router基本使用模式和导航钩子的用法及作用"></a>vue-router基本使用模式和导航钩子的用法及作用</h4><p>vue-router使用大家想必不是很陌生，这里直接写一个案例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// router.ts</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./views/admin/Home.vue'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Router);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router =  <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: process.env.BASE_URL,</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      component: Home,</span><br><span class="line">      beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">        next();</span><br><span class="line">      &#125;,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">// 当 /user/:id/profile 匹配成功，</span></span><br><span class="line">          <span class="comment">// UserProfile 会被渲染在 User 的 &lt;router-view&gt; 中</span></span><br><span class="line">          path: <span class="string">''</span>,</span><br><span class="line">          name: <span class="string">'header'</span>,</span><br><span class="line">          component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "header" */</span> <span class="string">'./views/admin/subpage/Header.vue'</span>),</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'/banner'</span>,</span><br><span class="line">          name: <span class="string">'banner'</span>,</span><br><span class="line">          component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "banner" */</span> <span class="string">'./views/admin/subpage/Banner.vue'</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'/admin'</span>,</span><br><span class="line">          name: <span class="string">'admin'</span>,</span><br><span class="line">          component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "admin" */</span> <span class="string">'./views/admin/Admin.vue'</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/login'</span>,</span><br><span class="line">      name: <span class="string">'login'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "login" */</span> <span class="string">'./views/Login.vue'</span>),</span><br><span class="line">      meta:&#123;</span><br><span class="line">        keepAlive:<span class="literal">false</span> <span class="comment">//不需要被缓存的组件</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'*'</span>,</span><br><span class="line">      name: <span class="string">'404'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "404" */</span> <span class="string">'./views/404.vue'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由导航钩子的用法</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">from</span>.path.indexOf(<span class="string">'/preview'</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    sessionStorage.setItem(<span class="string">'prevToPreviewPath'</span>, <span class="keyword">from</span>.path);</span><br><span class="line">  &#125;</span><br><span class="line">  next();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>以上案例是很典型的静态路由配置和导航钩子的用法（如何加载路由组件，动态加载路由组件，404页面路由配置，路由导航钩子使用）。如果在做后台系统，往往会涉及到权限系统，所以一般会采用动态配置路由，通过前后端约定的路由方式，路由配置文件更具不同用户的权限由后端处理后返。由于设计细节比较繁琐，涉及到前后端协定，所以这里只讲思路就好了。</p>
<h4 id="vue中检测变化的注意事项"><a href="#vue中检测变化的注意事项" class="headerlink" title="vue中检测变化的注意事项"></a>vue中检测变化的注意事项</h4><p>受现代 JavaScript 的限制，Vue 无法检测到对象属性的添加或删除。由于 Vue 会在初始化实例时对属性执行 getter/setter 转化，所以属性必须在 data 对象上存在才能让 Vue 将它转换为响应式的。还有一种情况是，vue无法检测到data属性值为数组或对象的修改，所以我们需要用原对象与要混合进去的对象的属性一起创建一个新的对象。可以使用this.$set或者对象的深拷贝，如果是数组则可以使用splice，扩展运算符等方法来更新。</p>
<h4 id="对指定页面使用keep-alive路由缓存"><a href="#对指定页面使用keep-alive路由缓存" class="headerlink" title="对指定页面使用keep-alive路由缓存"></a>对指定页面使用keep-alive路由缓存</h4><p>keep-alive是Vue的内置组件，能在组件切换过程中将状态保留在内存中，防止重复渲染DOM。我们可以使用以下方式设置某些页面是否被缓存： 1. 通过路由配置文件和router-view设置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// routes 配置</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/A'</span>,</span><br><span class="line">    name: <span class="string">'A'</span>,</span><br><span class="line">    component: A,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      keepAlive: <span class="literal">true</span> <span class="comment">// 需要被缓存</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">'/B'</span>,</span><br><span class="line">    name: <span class="string">'B'</span>,</span><br><span class="line">    component: B,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      keepAlive: <span class="literal">false</span> <span class="comment">// 不需要被缓存</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>路由视图配置：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// 路由设置</span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"$route.meta.keepAlive"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 会被缓存的视图组件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"!$route.meta.keepAlive"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 不需要缓存的视图组件--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>通过router-view的key属性 具体方式如下：</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;keep-alive&gt;</span><br><span class="line">      &lt;router-view :key=<span class="string">"key"</span> /&gt;</span><br><span class="line">    &lt;<span class="regexp">/keep-alive&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script lang="ts"&gt;</span></span><br><span class="line"><span class="regexp">import &#123; Vue &#125; from 'vue-property-decorator';</span></span><br><span class="line"><span class="regexp">import Component from 'vue-class-component';</span></span><br><span class="line"><span class="regexp">@Component</span></span><br><span class="line"><span class="regexp">export default class App extends Vue &#123;</span></span><br><span class="line"><span class="regexp">  get key() &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ 缓存除预览和登陆页面之外的其他页面</span></span><br><span class="line"><span class="regexp">    console.log(this.$route.path)</span></span><br><span class="line"><span class="regexp">    if(this.$route.path.indexOf('/</span>preview<span class="string">') &gt; -1) &#123;</span></span><br><span class="line"><span class="string">      return '</span><span class="number">0</span><span class="string">'</span></span><br><span class="line"><span class="string">    &#125;else if(this.$route.path === '</span>/login<span class="string">') &#123;</span></span><br><span class="line"><span class="string">      return '</span><span class="number">1</span><span class="string">'</span></span><br><span class="line"><span class="string">    &#125;else &#123;</span></span><br><span class="line"><span class="string">      return '</span><span class="number">2</span><span class="string">'</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="vue常用工具函数总结"><a href="#vue常用工具函数总结" class="headerlink" title="vue常用工具函数总结"></a>vue常用工具函数总结</h4><p>总结一下笔者在vue项目中的常用的工具函数。 * 识别ie浏览器</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 识别ie--浅识别</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isIe = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> explorer = <span class="built_in">window</span>.navigator.userAgent;</span><br><span class="line">        <span class="comment">//判断是否为IE浏览器</span></span><br><span class="line">    <span class="keyword">if</span> (explorer.indexOf(<span class="string">"MSIE"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>颜色16进制转rgba</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 颜色转换16进制转rgba</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>hex </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>opacity </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">hex2Rgba</span>(<span class="params">hex, opacity</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!hex) hex = <span class="string">"#2c4dae"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"rgba("</span> + <span class="built_in">parseInt</span>(<span class="string">"0x"</span> + hex.slice(<span class="number">1</span>, <span class="number">3</span>)) + <span class="string">","</span> + <span class="built_in">parseInt</span>(<span class="string">"0x"</span> + hex.slice(<span class="number">3</span>, <span class="number">5</span>)) + <span class="string">","</span> + <span class="built_in">parseInt</span>(<span class="string">"0x"</span> + hex.slice(<span class="number">5</span>, <span class="number">7</span>)) + <span class="string">","</span> + (opacity || <span class="string">"1"</span>) + <span class="string">")"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>去除html标签</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 去除html标签</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> htmlSafeStr = <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="string">""</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>获取url参数对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 获取url参数 */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getQueryString = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> qs = location.href.split(<span class="string">'?'</span>)[<span class="number">1</span>] || <span class="string">''</span>,</span><br><span class="line">        args = &#123;&#125;,</span><br><span class="line">        items = qs.length ? qs.split(<span class="string">"&amp;"</span>) : [];</span><br><span class="line">        items.forEach(<span class="function">(<span class="params">item,i</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> arr = item.split(<span class="string">'='</span>),</span><br><span class="line">                name = <span class="built_in">decodeURIComponent</span>(arr[<span class="number">0</span>]),</span><br><span class="line">                value = <span class="built_in">decodeURIComponent</span>(arr[<span class="number">1</span>]);</span><br><span class="line">                name.length &amp;&amp; (args[name] = value)</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="keyword">return</span> args;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>解析url参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 解析url参数 */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> paramsToStringify = <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(params)&#123;</span><br><span class="line">        <span class="keyword">let</span> query = [];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> params)&#123;</span><br><span class="line">            query.push(<span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;params[key]&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;query.join(<span class="string">'&amp;'</span>)&#125;</span>`</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>将数据转化为数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> toArray = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(data) ? data : [data]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>带参数跳转url（hash模式）</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  带参数跳转url（hash模式）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>params </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> toPage = <span class="function">(<span class="params">url, params</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(params)&#123;</span><br><span class="line">        <span class="keyword">let</span> query = [];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> params)&#123;</span><br><span class="line">            query.push(<span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;params[key]&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">window</span>.location.href = <span class="string">`./index.html#/<span class="subst">$&#123;url&#125;</span>?<span class="subst">$&#123;query.join(<span class="string">'&amp;'</span>)&#125;</span>`</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.location.href = <span class="string">`./index.html#/<span class="subst">$&#123;url&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>控制字符串显示，超出指定字数则显示省略号</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 指定字符串 溢出显示省略号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> <span class="variable">str</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> <span class="variable">num</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getSubStringSum = <span class="function">(<span class="params">str = <span class="string">""</span>, num = <span class="number">1</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> newStr;</span><br><span class="line">    <span class="keyword">if</span>(str)&#123;</span><br><span class="line">        str = str + <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">if</span> (str.trim().length &gt; num ) &#123;</span><br><span class="line">            newStr = str.trim().substring(<span class="number">0</span>, num) + <span class="string">"..."</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            newStr = str.trim();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        newStr = <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>生成uuid</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成uuid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>len 生成指定长度的uuid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>radix uuid进制数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">uuid</span>(<span class="params">len, radix</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> chars = <span class="string">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</span>.split(<span class="string">''</span>);</span><br><span class="line">    <span class="keyword">let</span> uuid = [], i;</span><br><span class="line">    radix = radix || chars.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (len) &#123;</span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) uuid[i] = chars[<span class="number">0</span> | <span class="built_in">Math</span>.random()*radix];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> r;</span><br><span class="line"></span><br><span class="line">      uuid[<span class="number">8</span>] = uuid[<span class="number">13</span>] = uuid[<span class="number">18</span>] = uuid[<span class="number">23</span>] = <span class="string">'-'</span>;</span><br><span class="line">      uuid[<span class="number">14</span>] = <span class="string">'4'</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">36</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!uuid[i]) &#123;</span><br><span class="line">          r = <span class="number">0</span> | <span class="built_in">Math</span>.random()*<span class="number">16</span>;</span><br><span class="line">          uuid[i] = chars[(i == <span class="number">19</span>) ? (r &amp; <span class="number">0x3</span>) | <span class="number">0x8</span> : r];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> uuid.join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>生成指定格式的时间字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成指定格式的时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>timeStemp 时间戳</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>flag 格式符号</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">formatTime</span>(<span class="params">timeStemp, flag</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(timeStemp);</span><br><span class="line">    <span class="keyword">let</span> timeArr = [time.getFullYear(), time.getMonth() + <span class="number">1</span>, time.getDate()];</span><br><span class="line">    <span class="keyword">return</span> timeArr.join(flag || <span class="string">'/'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="如何基于axios二次封装一个具有请求-响应拦截的http请求"><a href="#如何基于axios二次封装一个具有请求-响应拦截的http请求" class="headerlink" title="如何基于axios二次封装一个具有请求/响应拦截的http请求"></a>如何基于axios二次封装一个具有请求/响应拦截的http请求</h4><p>这个主要是对axios的理解，大家可以学习axios官方文档，这里给出一个二次封装的模版：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 此处可以封装一些加载状态</span></span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, error =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> response</span><br><span class="line">&#125;, error =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(error.response)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkStatus</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 此处可以封装一些加载状态</span></span><br><span class="line">  <span class="comment">// 如果http状态码正常，则直接返回数据</span></span><br><span class="line">  <span class="keyword">if</span>(response) &#123;</span><br><span class="line">    <span class="keyword">if</span> (response.status === <span class="number">200</span> || response.status === <span class="number">304</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response.data</span><br><span class="line">      <span class="comment">// 如果不需要除了data之外的数据，可以直接 return response.data</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.status === <span class="number">401</span>) &#123;</span><br><span class="line">      location.href = <span class="string">'/login'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> response.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> &#123;<span class="attr">data</span>:<span class="string">'网络错误'</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios默认参数配置</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">'/api/v0'</span>;</span><br><span class="line">axios.defaults.timeout = <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// restful API封装</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  post (url, data) &#123;</span><br><span class="line">    <span class="keyword">return</span> axios(&#123;</span><br><span class="line">      method: <span class="string">'post'</span>,</span><br><span class="line">      url,</span><br><span class="line">      data: qs.stringify(data),</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'X-Requested-With'</span>: <span class="string">'XMLHttpRequest'</span>,</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded; charset=UTF-8'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(</span><br><span class="line">      (res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> checkStatus(res)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span> (url, params) &#123;</span><br><span class="line">    <span class="keyword">return</span> axios(&#123;</span><br><span class="line">      method: <span class="string">'get'</span>,</span><br><span class="line">      url,</span><br><span class="line">      params, <span class="comment">// get 请求时带的参数</span></span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'X-Requested-With'</span>: <span class="string">'XMLHttpRequest'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(</span><br><span class="line">      (res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> checkStatus(res)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">  del (url, params) &#123;</span><br><span class="line">    <span class="keyword">return</span> axios(&#123;</span><br><span class="line">      method: <span class="string">'delete'</span>,</span><br><span class="line">      url,</span><br><span class="line">      params, <span class="comment">// get 请求时带的参数</span></span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'X-Requested-With'</span>: <span class="string">'XMLHttpRequest'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(</span><br><span class="line">      (res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> checkStatus(res)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>该模版只是一个大致框架，大家可以细化成业务需求的样子，该案例提供了restful接口方法，比如get/post/delete/put等。</p>
<h4 id="vue常用社区组件，插件"><a href="#vue常用社区组件，插件" class="headerlink" title="vue常用社区组件，插件"></a>vue常用社区组件，插件</h4><p>笔者在做vue项目时为了提高开发效率也会直接用第三方插件，下面整理一下常用的vue社区组件和库。 1. UI框架</p>
<ul>
<li><a href="https://link.zhihu.com/?target=https%3A//element.eleme.cn/%23/zh-CN/component/quickstart">elementUI</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//www.iviewui.com/docs/guide/global">iview</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//mint-ui.github.io/docs/">Mint UI 基于 Vue.js 的移动端组件库</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//youzan.github.io/vant/%23/zh-CN/popup">Vant 有赞团队的移动端组件库</a></li>
<li>社区组件</li>
<li><a href="https://link.zhihu.com/?target=https%3A//www.vuetable.com/guide/%23features">Vuetable-2 基于vue的强大的表格组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//cweili.github.io/vue-fa/">vue-fa 基于vue的图标组件库</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//vue-notification.yev.io/">vue-notification vue优美的信息通知组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//akryum.github.io/vue-progress-path/">vue-progress-path vue个性的路径进度条组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//github.com/amsik/liquor-tree">Vue树组件，可让您以美观和逻辑的方式呈现层次结构的数据</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//nicolasbeauvais.github.io/vue-social-sharing/">vue-social-sharing vue社区分享组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//gruhn.github.io/vue-qrcode-reader/">vue-qrcode-reader 一组用于检测和解码二维码的Vue.js组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//vue-clipboard2.inndy.tw/">vue-clipboard2 基于vue的剪切板组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//kevinfaguiar.github.io/cool-emoji-picker/%23home">cool-emoji-picker vue表情包组件</a></li>
<li><a href="https://link.zhihu.com/?target=http%3A//vue-tabs-component.spatie.be/">Vue-tabs-component 强大而美观的tab组件</a></li>
</ul>
<p>更多组件可以在<a href="https://link.zhihu.com/?target=https%3A//github.com/vuejs/awesome-vue">vue插件社区</a>查看。</p>
<h3 id="vue项目配置经验总结"><a href="#vue项目配置经验总结" class="headerlink" title="vue项目配置经验总结"></a>vue项目配置经验总结</h3><p>在讲完vue项目经验之后，为了让大家能独立负责一个项目，我们还需要知道从0开始搭建项目的步骤，以及通过项目实际情况，自己配置一个符合的项目框架，比如有些公司会采用vue+element+vue+less搭建，有些公司采用vue+iview+vue+sass，或者其他更多的技术栈，所以我们要有把控能力，我们需要熟悉webpack或者vue-cli3脚手架的配置，之前有些过详细的webpack和vue-cli3搭建自定义项目的文章，这里由于篇幅有限就不一一举例了。感兴趣的朋友可以参考以下两篇文章： <em><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5d1782eaf265da1ba91592fc">一张图教你快速玩转vue-cli3</a></em> <a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5d078cc16fb9a07ef37668d0">用 webpack 4.0 撸单页/多页脚手架 (jquery, react, vue, typescript)</a></p>
<h3 id="vue组件设计经验总结"><a href="#vue组件设计经验总结" class="headerlink" title="vue组件设计经验总结"></a>vue组件设计经验总结</h3><blockquote>
<p>组件系统是 Vue 的另一个重要概念，因为它是一种抽象，允许我们使用小型、独立和通常可复用的组件构建大型应用。几乎任意类型的应用界面都可以抽象为一个组件树。在一个大型应用中，有必要将整个应用程序划分为组件，以使开发更易管理。</p>
</blockquote>
<p>对于一个基础组件来说，我们该如何下手去设计呢？首先应该先从需求和功能入手，先划分好组件的功能边界，组件能做什么，理清这些之后再开始写组件。</p>
<p><img src="/" class="lazyload" data-src="http://qiniu.loveyu.wang/image-20200602105319240.png"  alt="image-20200602105319240"></p>
<p>如上图组件的一个抽象，我们无论如何记住的第一步就是先理清需求在去着手开发，这样可以避免大量效率的丢失。在上图中我们要注意组件的解耦合，每个组件都负责特定的功能或展现，这样对组件后期维护性和扩展性有非常大的帮助。笔者总结了一下组件设计的注意事项： <em>确定组件设计的边界和功能定位</em> 组件尽量遵循单一职责原理，用组合代替功能的杂糅 <em>组件属性暴露要适度，不可过渡暴露属性</em> 组件封装要考虑可重用，可组合，可配置 * 做好组件类型设计的划分（展示型组件，录入型组件，基础组件， 布局组件，反馈型组件，业务组件等）</p>
<p>拿之前在开源社区发布的一个文件上传组件为例子来说明举例，代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-upload</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:action</span>=<span class="string">"action"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">listType</span>=<span class="string">"picture-card"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:fileList</span>=<span class="string">"fileList"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">preview</span>=<span class="string">"handlePreview"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">change</span>=<span class="string">"handleChange"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:remove</span>=<span class="string">"delFile"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:data</span>=<span class="string">"data"</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">"!fileList.length &amp;&amp; defaultValue"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"defaultValue"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"fileList.length &lt; 2"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a-icon</span> <span class="attr">type</span>=<span class="string">"plus"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ant-upload-text"</span>&gt;</span>上传<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-upload</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-modal</span> <span class="attr">:visible</span>=<span class="string">"previewVisible"</span> <span class="attr">:footer</span>=<span class="string">"null"</span> @<span class="attr">cancel</span>=<span class="string">"handleCancel"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"example"</span> <span class="attr">style</span>=<span class="string">"width: 100%"</span> <span class="attr">:src</span>=<span class="string">"previewImage"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-modal</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; Component, Vue, Prop &#125; <span class="keyword">from</span> <span class="string">'vue-property-decorator'</span>;</span></span><br><span class="line">@Component</span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Upload</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">  @Prop(&#123; <span class="keyword">default</span>: <span class="string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span> &#125;)</span></span><br><span class="line">  action!: string;</span><br><span class="line"></span><br><span class="line">  @Prop()</span><br><span class="line">  defaultValue: string;</span><br><span class="line"></span><br><span class="line">  @Prop()</span><br><span class="line">  data: object;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">  @Prop(&#123; <span class="keyword">default</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;&#125; &#125;)</span></span><br><span class="line">  onFileDel: any;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">  @Prop(&#123; <span class="keyword">default</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;&#125; &#125;)</span></span><br><span class="line">  onFileChange: any;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="keyword">public</span> previewVisible: boolean =  <span class="literal">false</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">public</span> previewImage: string =  <span class="string">''</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">public</span> fileList: object[] = [];</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// 预览图片</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">public</span> handlePreview(file: any) &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.previewImage = file.url || file.thumbUrl;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.previewVisible = <span class="literal">true</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// 删除文件和回调</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">public</span> delFile(file: any) &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.fileList = [];</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.onFileDel();</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// 文件上传变化的处理函数</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">public</span> handleChange(&#123; file &#125;: any) &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.fileList = [file];</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(file.status === <span class="string">'done'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.onFileChange(file.response.url);</span></span><br><span class="line"><span class="actionscript">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(file.status === <span class="string">'error'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$message.error(file.response.msg)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="actionscript">  <span class="comment">// 取消预览</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">public</span> handleCancel() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.previewVisible = <span class="literal">false</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>以上文件上传预览采用的是ts来实现，但设计思路都是一致的，大家可以参考交流一下。 关于如何设计一个健壮的组件，笔者也写过相关文章，大致思想都好似一样的，可以参考一下：</p>
<ul>
<li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5e366772f265da3e307710dd">《精通react/vue组件设计》之快速实现一个可定制的进度条组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5e35294d518825263237f3ba">《精通react/vue组件设计》之用纯css打造类materialUI的按钮点击动画并封装成react组件</a></li>
<li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5d142720f265da1bc4146433">3分钟教你用原生js实现具有进度监听的文件上传预览组件</a></li>
</ul>
<p>组件的设计思想和方法与具体框架无关，所以组件设计的核心是方法论，我们只有在项目中不断总结和抽象，才能对组件设计有更深刻的理解。</p>
<h3 id="vue项目架构与服务化探索"><a href="#vue项目架构与服务化探索" class="headerlink" title="vue项目架构与服务化探索"></a>vue项目架构与服务化探索</h3><p>这里是总结的一套思维导图：</p>
<p><img src="/" class="lazyload" data-src="http://qiniu.loveyu.wang/image-20200602105536020.png"  alt="image-20200602105536020"></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Lhl</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lhl-cpu.github.io/2019/11/26/vue/">https://lhl-cpu.github.io/2019/11/26/vue/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lhl-cpu.github.io" target="_blank">趁年轻</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/es6/">es6</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a><a class="post-meta__tags" href="/tags/webpack/">webpack</a><a class="post-meta__tags" href="/tags/Vuejs/">Vuejs</a><a class="post-meta__tags" href="/tags/element/">element</a><a class="post-meta__tags" href="/tags/vue-cli/">vue-cli</a><a class="post-meta__tags" href="/tags/vuex/">vuex</a><a class="post-meta__tags" href="/tags/vue-router/">vue-router</a></div><div class="post_share"><div class="social-share" data-image="http://qiniu.loveyu.wang/%E4%B8%8B%E8%BD%BD.jfif" data-sites="qq,wechat,weibo,facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/11/26/es6/"><img class="prev_cover lazyload" data-src="http://qiniu.loveyu.wang/20200513152748.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">ES6</div></div></a></div><div class="next-post pull_right"><a href="/2019/10/26/ajax/"><img class="next_cover lazyload" data-src="http://qiniu.loveyu.wang/ajax.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Ajax</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/10/26/nodejs01/" title="node学习笔记"><img class="relatedPosts_cover lazyload"data-src="http://qiniu.loveyu.wang/node.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-10-26</div><div class="relatedPosts_title">node学习笔记</div></div></a></div><div class="relatedPosts_item"><a href="/2019/11/26/es6/" title="ES6"><img class="relatedPosts_cover lazyload"data-src="http://qiniu.loveyu.wang/20200513152748.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-11-26</div><div class="relatedPosts_title">ES6</div></div></a></div><div class="relatedPosts_item"><a href="/2019/10/26/webpack4.42.1/" title="Webpack"><img class="relatedPosts_cover lazyload"data-src="http://qiniu.loveyu.wang/webpack.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-10-26</div><div class="relatedPosts_title">Webpack</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: false,
  verify: false,
  appId: 'zDx3dNSqQly2FpIqdktw1I85-gzGzoHsz',
  appKey: 'BNzNDQtsW6BljxigY706EOGX',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: ''
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Lhl</div><div class="footer_custom_text">Hi, welcome to my <a href="https://lhl-cpu.github.io/">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><i class="darkmode fa fa-sun-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/search/local-search.js"></script></body></html>